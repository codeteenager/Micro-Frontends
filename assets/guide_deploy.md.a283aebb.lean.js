import{a as s,_ as n,w as a,N as l}from"./chunks/framework.4770d472.js";const E=JSON.parse('{"title":"部署","description":"","frontmatter":{},"headers":[],"relativePath":"guide/deploy.md","filePath":"guide/deploy.md","lastUpdated":1693905948000}'),p={name:"guide/deploy.md"},o=l(`<h1 id="部署" tabindex="-1">部署 <a class="header-anchor" href="#部署" aria-label="Permalink to &quot;部署&quot;">​</a></h1><p>Nginx部署方案有三种，如果没有特殊需求，个人推荐第三种</p><ol><li>多个应用多个端口，主应用配置多个子应用路径转发到相对应的子应用端口上。</li></ol><ul><li>优点：子应用能单独访问</li><li>缺点：每有新增子应用时，则每次都要新增一个子应用端口和转发</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">http</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    # </span><span style="color:#BABED8;">main</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">server</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">listen</span><span style="color:#F07178;">       </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">root</span><span style="color:#F07178;">   </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">share</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">main</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">index</span><span style="color:#F07178;">  </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">pms</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">           </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">           </span><span style="color:#BABED8;">proxy_pass</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//127.0.0.1:8081;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">oms</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">proxy_pass</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//127.0.0.1:8082;</span></span>
<span class="line"><span style="color:#F07178;">         </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    # </span><span style="color:#BABED8;">pms</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">server</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">listen</span><span style="color:#F07178;">       </span><span style="color:#F78C6C;">8081</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">root</span><span style="color:#F07178;">   </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">share</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">pms</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">index</span><span style="color:#F07178;">  </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    # </span><span style="color:#BABED8;">oms</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">server</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">listen</span><span style="color:#F07178;">       </span><span style="color:#F78C6C;">8082</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">root</span><span style="color:#F07178;">   </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">share</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">oms</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">index</span><span style="color:#F07178;">  </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><ol start="2"><li>多个应用一个端口，子应用需要一个二级目录装着，子应用只配置一个location即可，但是目录名必须跟主应用的Layout路由的path属性一样，并且应用名必须跟是部署的目录一致，比如有主应用(main)，子应用有pms、oms，那么该目录结构如下：</li></ol><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> main</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span></span>
<span class="line"><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">module</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> pms</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span></span>
<span class="line"><span style="color:#BABED8;">     </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> oms</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#89DDFF;">|</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">--</span><span style="color:#BABED8;"> index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>优点：一个端口即可，location只需两个，一个主应用，一个子应用</li><li>缺点：子应用都得在一个指定的目录下，打包后完需要用sh命令，改变dist目录名和位置，增加复杂度；对于部分运维部署软件，可能无法回滚；无法单独访问子应用</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">server </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">listen</span><span style="color:#F07178;">       </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">主应用</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">root</span><span style="color:#F07178;">   </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">web</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">qiankun</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">main</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">index</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    # </span><span style="color:#89DDFF;">^~</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">匹配任何以</span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">开头的任何查询并且停止搜索</span><span style="color:#F07178;">。</span><span style="color:#BABED8;">任何正则表达式将不会被测试</span><span style="color:#F07178;">。</span></span>
<span class="line"><span style="color:#F07178;">    # </span><span style="color:#C792EA;">module</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">必须与</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">主应用的Layout路由的path</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">一直</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#FFCB6B;">location</span><span style="color:#F07178;"> ^~ /</span><span style="color:#FFCB6B;">module</span><span style="color:#F07178;">/ </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">所有子应用</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">alias</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">web</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">qiankun</span><span style="color:#89DDFF;">/module;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ol start="3"><li>多个应用一个端口，通过正则表达式匹配后缀名，用alias或者rewrite重写请求，要求应用名必须跟是部署的目录一致，可以设置vue.config.js的outputDir属性，改变dist目录名。</li></ol><p>先分析请求规则</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">请求 </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;"> </span><span style="color:#676E95;font-style:italic;">// 主应用的启动页</span></span>
<span class="line"><span style="color:#BABED8;">请求 </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">pms</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">A </span><span style="color:#676E95;font-style:italic;">// pms应用 A页面</span></span>
<span class="line"><span style="color:#BABED8;">请求 </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">pms</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">B </span><span style="color:#676E95;font-style:italic;">// pms应用 B页面</span></span>
<span class="line"><span style="color:#BABED8;">请求 </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">oms</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">C </span><span style="color:#676E95;font-style:italic;">// oms应用 C页面</span></span>
<span class="line"><span style="color:#BABED8;">请求 </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">/module/</span><span style="color:#BABED8;">oms</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">D </span><span style="color:#676E95;font-style:italic;">// oms应用 D页面</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>根据如上规则，可以知道第一个/后面的module是固定的，第二个/后面就是应用名，第三个/后面是具体的路由地址。所以根据如上规则可以用正则表达式匹配，并改写请求。</p><ul><li>优点：一个端口，location只需两个，一个主应用，一个子应用；子应用的location用正则表达式动态匹配，并用rewrite动态重写url；在服务器打包完后的路径就是最终路径，不用改写目录。</li><li>缺点：Nginx的location正则匹配性能消耗性能大一点？</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#BABED8;">server </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">listen</span><span style="color:#F07178;">       </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">主应用</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">root</span><span style="color:#F07178;">   </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">web</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">qiankun</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">main</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">index</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#BABED8;">location</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">^~</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">module</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">.*</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">所有子应用</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#BABED8;">try_files</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">$uri</span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">index</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#BABED8;">$1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">有值时</span><span style="color:#F07178;">，</span><span style="color:#BABED8;">则跳到对应的子应用</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">alias</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">web</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">qiankun</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">$1</span></span>
<span class="line"><span style="color:#F07178;">            # </span><span style="color:#BABED8;">rewrite</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/module/(.*)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/data/web/qiankun/$1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">last</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> # </span><span style="color:#BABED8;">没有值时</span><span style="color:#F07178;">，</span><span style="color:#BABED8;">则跳到主应用</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#BABED8;">alias</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">data</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">web</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">qiankun</span><span style="color:#89DDFF;">/</span><span style="color:#BABED8;">main</span></span>
<span class="line"><span style="color:#F07178;">            #</span><span style="color:#BABED8;">rewrite</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/module/(.*)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/data/web/qiankun/main</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#BABED8;">last</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div>`,15),e=[o];function r(c,t,y,D,F,i){return n(),a("div",null,e)}const b=s(p,[["render",r]]);export{E as __pageData,b as default};
